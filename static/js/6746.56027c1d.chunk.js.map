{"version":3,"file":"static/js/6746.56027c1d.chunk.js","mappings":"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","sources":["components/crud/CreateItem.js","helpers/fetchCreate.js"],"sourcesContent":["import '../../alerts/modal/modal.css';\r\nimport { lazy, useState, useCallback, useMemo, memo } from \"react\";\r\nimport { useThemeContext } from \"../../theme/ThemeContext.js\";\r\nimport { useAlertContext } from \"../../alerts/AlertContext.js\";\r\nimport { fetchCreate } from \"../../helpers/fetchCreate.js\";\r\nimport { myColor } from '../../global.js';\r\n\r\nconst Input = lazy(() => import(\"../forms/inputs/Input.js\"));\r\nconst Dropdown = lazy(() => import(\"../forms/dropdown/Dropdown.js\"));\r\n\r\nexport const CreateItem = ({ classType, Icon, objectHook, setOpen }) => {\r\n  const { theme } = useThemeContext();                            // ðŸ‘ˆ Call the global theme\r\n  const { alert } = useAlertContext();\r\n  const [openDropdownKey, setOpenDropdownKey] = useState(null);\r\n\r\n  // const { state, api: urlApi, resetState } = useCrudFactory({ classType });\r\n  const { api:urlApi, state, resetState, handleItems } = objectHook;\r\n\r\n  // Capitaliza el nombre del tipo de clase para mostrar en el tÃ­tulo\r\n  const capitalizedClassType = useMemo(\r\n    () => classType.charAt(0).toUpperCase() + classType.slice(1),\r\n    [classType]\r\n  );\r\n\r\n  // FunciÃ³n para crear el nuevo Ã­tem\r\n  const handleCreate = useCallback(() => {\r\n    const hasEmptyFields = state.some(property => property.value === \"\");\r\n    if (hasEmptyFields) {\r\n      alert({ type: \"warning\", title: \"Debes ingresar todos los datos\", buttons: 1 });\r\n      return;\r\n    }\r\n\r\n    const itemPayload = state.reduce((obj, property) => {\r\n      obj[property.key] = property.value;\r\n      return obj;\r\n    }, {});\r\n\r\n    const dataItem = JSON.stringify({ [classType]: itemPayload });\r\n\r\n    fetchCreate(urlApi, dataItem)\r\n      .then(async (responseStatus) => {\r\n        if (responseStatus >= 200 && responseStatus < 300) {\r\n          handleItems('create', { [classType]: itemPayload });                        // El padre actualiza el estado y React re-renderiza con el elemento actualizado\r\n\r\n          resetState();\r\n          alert({ type: \"success\", title: \"Registro exitoso\", buttons: 1 });\r\n        } else if (responseStatus >= 400 && responseStatus < 500) {\r\n          alert({ type: \"error\", title: \"Error en el envÃ­o de datos\", buttons: 1 });\r\n        } else if (responseStatus >= 500) {\r\n          alert({ type: \"error\", title: \"Error en el servidor remoto\", buttons: 1 });\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error en la creaciÃ³n:\", error);\r\n        alert({ type: \"error\", title: \"Error en el registro\", buttons: 1 });\r\n      });\r\n  }, [state, urlApi, classType, alert, resetState, handleItems]);\r\n\r\n  // ðŸ‘‡ Close view memorized handler\r\n  const handleClose = useCallback(() => setOpen(false), [setOpen]);   \r\n\r\n  // ðŸ‘‡ Dropdowns toggle memorized handler\r\n  const handleToggleDropdown = useCallback((key) => setOpenDropdownKey((prev) => (prev === key ? null : key)), []);\r\n\r\n  if (process.env.NODE_ENV === 'development') console.log('[Create Item âž•]');\r\n\r\n  return (\r\n    <>\r\n      <div className={'modalContainer justify-items-center'}>\r\n        <div className={'modalBox'} data-theme={theme}>\r\n          <div className={'modalHeader'}>\r\n             <center><Icon color={myColor} height={2.5} width={2.5} strokeWidth={0.6} className={'center'} /></center>\r\n             <h6 className=\"modalTitle century-gothic main-color pt-2\">Registrar {capitalizedClassType}</h6>\r\n          </div>\r\n          <div className={'modalContent'}>\r\n            <div className='container-fluid modalTable mt-2'>\r\n              {state.map((property) => (\r\n                <div key={property.key} className=\"row bg-row\">\r\n                  { property.type === \"dropdown\" ? ( <Dropdown property={property} isOpen={openDropdownKey === property.key} onToggle={() => handleToggleDropdown(property.key)} /> ) \r\n                                                 : ( <div className=\"col px-0\"><Input type={property.type} value={property.value} handleChange={property.handleChange} placeholder={property.key.charAt(0).toUpperCase() + property.key.slice(1)} className=\"input form-control rounded border-muted border-1 text-center shadow-sm\" /> </div> )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n          <div className={'modalFooter'}>\r\n            <div className={'d-flex mt-2 w-100'}>\r\n              <button className={'aceptBtn w-100'} onClick={() => { handleCreate(); handleClose(); }}>Registrar</button>\r\n              <button className={'cancelBtn w-100'} onClick={ handleClose }>Cancelar</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className={'darkBackground'} onClick={ handleClose }></div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default memo(CreateItem);\r\n","export const fetchCreate = async ( urlApi,dataApi ) => {\r\n  try {  \r\n    const response = await fetch(urlApi, {\r\n      method: \"POST\",\r\n      body: dataApi,\r\n      headers: { \"Content-type\": \"application/json\" }\r\n    });\r\n    response.json();\r\n    if(200 <= response.status && response.status <= 299){\r\n      console.log('POST ' + response.status + ' Registro exitoso')\r\n    } else if(400 <= response.status && response.status <= 499){\r\n      console.log('POST ' + response.status + ' Registro fallido: Error en el envÃ­o de datos')\r\n    } else if(500 <= response.status && response.status <= 599){\r\n      console.log('POST ' + response.status + ' Registro fallido: Error en el servidor remoto')\r\n    }\r\n  return response.status;\r\n  } catch (error) {\r\n      const errorMessage = error.toString().split(':')[1].trim();\r\n      if(errorMessage === 'Failed to fetch') { console.log('Registro fallido: No hay conexiÃ³n con la base de datos') } \r\n      else { console.log('Registro fallido: ' + errorMessage) }     \r\n    };\r\n}"],"names":["Input","lazy","Dropdown","CreateItem","_ref","classType","Icon","objectHook","setOpen","theme","useThemeContext","alert","useAlertContext","openDropdownKey","setOpenDropdownKey","useState","api","urlApi","state","resetState","handleItems","capitalizedClassType","useMemo","charAt","toUpperCase","slice","handleCreate","useCallback","some","property","value","type","title","buttons","itemPayload","reduce","obj","key","dataItem","JSON","stringify","async","dataApi","response","fetch","method","body","headers","json","status","console","log","error","errorMessage","toString","split","trim","fetchCreate","then","responseStatus","catch","handleClose","handleToggleDropdown","prev","_jsxs","_Fragment","children","_jsx","className","color","myColor","height","width","strokeWidth","map","isOpen","onToggle","handleChange","placeholder","onClick","memo"],"sourceRoot":""}