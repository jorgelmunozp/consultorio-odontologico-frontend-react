"use strict";(self.webpackChunkconsultorio_odontologico_frontend_react=self.webpackChunkconsultorio_odontologico_frontend_react||[]).push([[1812],{1812:(e,a,t)=>{t.r(a),t.d(a,{Item:()=>j,default:()=>b});var s=t(5043),o=t(7950),l=(t(3391),t(6213)),c=t(579);const n=e=>{let{classType:a,Icon:t,item:s,setOpen:o}=e;const n=Object.keys(s[a]),i=Object.values(s[a]);let r=[];i.forEach(e=>{"object"===typeof e?r.push(Object.values(e)[0]+" "+Object.values(e)[1]):r.push(e)});const d=()=>{o(!1)};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"modalContainer justify-items-center",children:(0,c.jsxs)("div",{className:"modalBox",children:[(0,c.jsxs)("div",{className:"modalHeader",children:[(0,c.jsx)("center",{children:(0,c.jsx)(t,{color:l.et,height:2.5,width:2.5,strokeWidth:.6,className:"center"})}),(0,c.jsx)("h6",{className:"modalTitle main-color pt-2",children:a.charAt(0).toUpperCase()+a.slice(1)})]}),(0,c.jsx)("div",{className:"modalContent",children:(0,c.jsxs)("div",{className:"container-fluid modalTable mt-2 overflow-auto",children:[(0,c.jsxs)("div",{className:"row modalTableTitle flex-nowrap",children:[(0,c.jsx)("div",{className:"col-6",children:"Par\xe1metro"}),(0,c.jsx)("div",{className:"col-6",children:"Datos"})]}),(0,c.jsxs)("div",{className:"row flex-nowrap",children:[(0,c.jsx)("div",{className:"col-6 modalTableData text-start",children:"C\xf3digo"}),(0,c.jsx)("div",{className:"col-6 modalTableData text-start",children:s.id})]}),r.map((e,a)=>(0,c.jsxs)("div",{className:"row flex-nowrap",children:[(0,c.jsx)("div",{className:"col-6 modalTableData text-start",children:n[a].charAt(0).toUpperCase()+n[a].slice(1)}),(0,c.jsx)("div",{className:"col-6 modalTableData text-start",children:e})]},n[a].toLowerCase()))]})}),(0,c.jsx)("div",{className:"modalFooter",children:(0,c.jsx)("div",{className:"d-grid mt-2 w-100",children:(0,c.jsx)("button",{className:"aceptBtn mx-auto w-50",onClick:d,children:"Aceptar"})})})]})}),(0,c.jsx)("div",{className:"darkBackground",onClick:d})]})};var i=t(2219),r=t(5186);const d=(0,s.lazy)(()=>t.e(7283).then(t.bind(t,7283))),m=(0,s.lazy)(()=>t.e(7466).then(t.bind(t,7466))),h=e=>{let{property:a,theme:t}=e;const o=(0,s.useMemo)(()=>new r.m({classType:a.key}),[a.key]),{array:l,pagination:n}=o.data;return(0,c.jsx)("div",{className:"col px-0",children:(0,c.jsx)(m,{classType:a.key,object:o,array:l,defaultSelect:a.value,handleChange:a.handleChange,placeholder:a.key.charAt(0).toUpperCase()+a.key.slice(1),pagination:n,className:"input form-control rounded border-muted border-1 text-muted shadow-sm","data-theme":t})})},u=e=>{let{classType:a,Icon:t,item:s,urlApi:o,setOpen:n,objectClass:r,handleItems:m,theme:u}=e,p={};switch(a){case"cita":p=r.getState({pac:s[a].paciente,cons:s[a].consultorio,doc:s[a].doctor,trat:s[a].tratamiento});break;case"paciente":p=r.getState({nomb:s[a].nombre,ape:s[a].apellido,id:s[a].identificacion,gen:s[a].genero,eps_:s[a].eps});break;case"doctor":p=r.getState({nomb:s[a].nombre,ape:s[a].apellido,id:s[a].identificacion,gen:s[a].genero,esp:s[a].especialidad});break;case"consultorio":p=r.getState({num:s[a].numero,nomb:s[a].nombre});break;case"especialidad":p=r.getState({nomb:s[a].nombre});break;case"tratamiento":p=r.getState({esp:s[a].especialidad,cons:s[a].consultorio,doc:s[a].doctor});break;default:p=r.getState({})}const x=()=>{n(!1)},j=()=>{p.every(e=>""!==e.value)&&(p.forEach(e=>{s[a][e.key]=e.value}),(async(e,a,t)=>{try{const s=await fetch(e+"/"+t,{method:"PUT",body:a,headers:{"Content-type":"application/json"}});return s.json(),200<=s.status&&s.status<=299?console.log("PUT "+s.status+" Actualizaci\xf3n exitosa"):400<=s.status&&s.status<=499?console.log("PUT "+s.status+" Actualizaci\xf3n fallida: Error en el env\xedo de datos"):500<=s.status&&s.status<=599&&console.log("PUT "+s.status+" Actualizaci\xf3n fallida: Error en el servidor remoto"),s.status}catch(s){const e=s.toString().split(":")[1].trim();"Failed to fetch"===e?console.log("Actualizaci\xf3n fallida: No hay conexi\xf3n con la base de datos"):console.log("Actualizaci\xf3n fallida: "+e)}})(o,JSON.stringify(s),s.id).then(async e=>{200<=e&&e<=299?(await fetch(o).then(e=>e.json()),m("update",s.id,a),(0,i.F)({type:"success",title:"Actualizaci\xf3n exitosa"}).launch()):(0,i.F)({type:"error",title:"Error en la actualizaci\xf3n"}).launch()},e=>{(0,i.F)({type:"error",title:"Error en la actualizaci\xf3n"}).launch(),console.log("Error Update: ",e)}))};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"modalContainer justify-items-center",children:(0,c.jsxs)("div",{className:"modalBox",children:[(0,c.jsxs)("div",{className:"modalHeader",children:[(0,c.jsx)("center",{children:(0,c.jsx)(t,{color:l.et,height:2.5,width:2.5,strokeWidth:.6,className:"center"})}),(0,c.jsx)("h6",{className:"modalTitle main-color pt-2",children:"Actualizar "+a.charAt(0).toUpperCase()+a.slice(1)+"?"})]}),(0,c.jsx)("div",{className:"modalContent",children:(0,c.jsxs)("div",{className:"container-fluid modalTable mt-2",children:[(0,c.jsx)("div",{className:"row",children:(0,c.jsx)(d,{placeholder:"C\xf3digo",defaultValue:s.id,type:"number",className:"input form-control rounded border-muted border-1 text-muted text-center shadow-sm pe-none"})}),p.map((e,a)=>(0,c.jsx)("div",{className:"row",children:"dropdown"===e.type?(0,c.jsx)(h,{property:e,theme:u}):(0,c.jsx)("div",{className:"col px-0",children:(0,c.jsx)(d,{property:!0,defaultValue:e.value,type:e.type,handleChange:e.handleChange,placeholder:e.key.charAt(0).toUpperCase()+e.key.slice(1),className:"input form-control rounded border-muted border-1 text-muted text-center shadow-sm"})})},"row"+a))]})}),(0,c.jsx)("div",{className:"modalFooter",children:(0,c.jsxs)("div",{className:"d-flex mt-2 w-100",children:[(0,c.jsx)("button",{className:"aceptBtn w-100",onClick:()=>{j(),x()},children:"Actualizar"}),(0,c.jsx)("button",{className:"cancelBtn w-100",onClick:x,children:"Cancel"})]})})]})}),(0,c.jsx)("div",{className:"darkBackground",onClick:x})]})},p=(0,s.lazy)(()=>t.e(7793).then(t.bind(t,7793))),x=e=>{let{classType:a,Icon:t=p,item:s,urlApi:o,setOpen:l,handleItems:n}=e;const r=Object.keys(s[a]),d=Object.values(s[a]);let m=[];d.forEach(e=>{"object"===typeof e?m.push(Object.values(e)[0]+" "+Object.values(e)[1]):m.push(e)});const h=()=>{l(!1)},u=()=>{(async(e,a)=>{try{const t=await fetch(e+"/"+a,{method:"DELETE",headers:{"Content-type":"application/json"}});return t.json(),200<=t.status&&t.status<=299?console.log("DELETE "+t.status+" Registro eliminado"):400<=t.status&&t.status<=499?console.log("DELETE "+t.status+" Eliminaci\xf3n fallida: Error en el env\xedo de datos"):500<=t.status&&t.status<=599&&console.log("DELETE "+t.status+" Eliminaci\xf3n fallida: Error en el servidor remoto"),t.status}catch(t){const e=t.toString().split(":")[1].trim();"Failed to fetch"===e?console.log("Eliminaci\xf3n fallida: No hay conexi\xf3n con la base de datos"):console.log("Eliminaci\xf3n fallida: "+e)}})(o,s.id).then(async e=>{200<=e&&e<=299?(await fetch(o).then(e=>e.json()),n("delete",s.id),(0,i.F)({type:"success",title:"Eliminaci\xf3n exitosa"}).launch()):(0,i.F)({type:"error",title:"Error en la eliminaci\xf3n"}).launch()},e=>{(0,i.F)({type:"error",title:"Error en la eliminaci\xf3n"}).launch(),console.log("Error en la eliminaci\xf3n: ",e)})};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"modalContainer justify-items-center",children:(0,c.jsxs)("div",{className:"modalBox",children:[(0,c.jsxs)("div",{className:"modalHeader",children:[(0,c.jsx)("center",{children:(0,c.jsx)(t,{color:"#f8bb86",height:3,width:3,className:"center"})}),(0,c.jsx)("h6",{className:"modalTitle main-color pt-2",children:"Eliminar "+a.charAt(0).toUpperCase()+a.slice(1)+"?"})]}),(0,c.jsx)("div",{className:"modalContent",children:(0,c.jsxs)("div",{className:"container-fluid modalTable mt-2 overflow-auto",children:[(0,c.jsxs)("div",{className:"row modalTableTitle flex-nowrap",children:[(0,c.jsx)("div",{className:"col-6",children:"Par\xe1metro"}),(0,c.jsx)("div",{className:"col-6",children:"Datos"})]}),(0,c.jsxs)("div",{className:"row flex-nowrap",children:[(0,c.jsx)("div",{className:"col-6 modalTableData text-start",children:"C\xf3digo"}),(0,c.jsx)("div",{className:"col-6 modalTableData text-start",children:s.id})]}),m.map((e,a)=>(0,c.jsxs)("div",{className:"row flex-nowrap",children:[(0,c.jsx)("div",{className:"col-6 modalTableData text-start",children:r[a].charAt(0).toUpperCase()+r[a].slice(1)}),(0,c.jsx)("div",{className:"col-6 modalTableData text-start",children:e})]},r[a].toLowerCase()))]})}),(0,c.jsx)("div",{className:"modalFooter",children:(0,c.jsxs)("div",{className:"d-flex mt-2 w-100",children:[(0,c.jsx)("button",{className:"aceptBtn w-100",onClick:()=>{u(),h()},children:"Eliminar"}),(0,c.jsx)("button",{className:"cancelBtn w-100",onClick:h,children:"Cancel"})]})})]})}),(0,c.jsx)("div",{className:"darkBackground",onClick:h})]})},j=e=>{let{classType:a,Icons:t,item:l,urlApi:i,objectClass:r,handleItems:d,theme:m}=e;const[h,p]=(0,s.useState)(!1),j=t[a].IconRead,b=t[a].IconSearch,g=t[a].IconEdit,v=t[a].IconDelete,N=["paciente","doctor","consultorio","tratamiento","especialidad","genero","eps"],y={read:(0,c.jsx)(n,{classType:a,Icon:j,item:l,setOpen:p}),update:(0,c.jsx)(u,{classType:a,Icon:g,item:l,urlApi:i,setOpen:p,objectClass:r,handleItems:d,theme:m}),delete:(0,c.jsx)(x,{classType:a,item:l,urlApi:i,setOpen:p,handleItems:d})};return h?document.body.classList.add("noScroll"):document.body.classList.remove("noScroll"),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"col-3 col-sm-2 text-nowrap",children:l.id}),Object.entries(l[a]).map((e,a)=>{let[t,s]=e;return(0,c.jsx)("div",{className:"text-start text-nowrap"+(N.includes(t)?" col-6 col-sm-3":" col-4 col-sm-2"),children:s},"item"+a)}),(0,c.jsx)("div",{className:"col",children:(0,c.jsx)("button",{className:"border-0 bg-transparent queryBtn main-color",onClick:()=>p("read"),children:(0,c.jsx)(b,{})})}),(0,c.jsx)("div",{className:"col",children:(0,c.jsx)("button",{className:"border-0 bg-transparent queryBtn main-color",onClick:()=>p("update"),children:(0,c.jsx)(g,{})})}),(0,c.jsx)("div",{className:"col",children:(0,c.jsx)("button",{className:"border-0 bg-transparent queryBtn main-color",onClick:()=>p("delete"),children:(0,c.jsx)(v,{})})}),h&&(0,o.createPortal)((0,c.jsx)("div",{id:"modal",children:y[h]}),document.body)]})},b=j},3391:()=>{},5186:(e,a,t)=>{t.d(a,{m:()=>n});var s=t(5043),o=t(2219),l=t(5356),c=t(6213);class n{constructor(e){let{classType:a=""}=e;this.getValue=e=>{let{defaultValue:a=""}=e,[t,o]=(0,s.useState)(a);return{value:t,setValue:o}},this.getData=()=>{let e="";switch(this.classType){case"paciente":e="https://jorgelmunozp.github.io/consultorio-odontologico-backend-node/pacientes";break;case"doctor":e="https://jorgelmunozp.github.io/consultorio-odontologico-backend-node/doctores";break;case"consultorio":e="https://jorgelmunozp.github.io/consultorio-odontologico-backend-node/consultorios";break;case"tratamiento":e="https://jorgelmunozp.github.io/consultorio-odontologico-backend-node/tratamientos";break;case"eps":e="https://jorgelmunozp.github.io/consultorio-odontologico-backend-node/epss";break;case"genero":e="https://jorgelmunozp.github.io/consultorio-odontologico-backend-node/generos";break;case"especialidad":e="https://jorgelmunozp.github.io/consultorio-odontologico-backend-node/especialidades";break;default:e=""}const a=(0,l.s)(e);(0,s.useEffect)(()=>{a.status>=400&&(0,o.F)({type:"error",title:"Error en la conexi\xf3n con la base de datos"}).launch()},[a]);const t=(0,s.useMemo)(()=>{this.classType,c.Nn.includes(this.classType);return JSON.stringify(a.data)&&void 0!==JSON.stringify(a.data).length?a.data:[]},[a.data]),[n,i]=(0,s.useState)(5),[r,d]=(0,s.useState)([0,n]),m=Math.floor(t.length/n),h=t.length%n;let u=[],p=[!0];if(0!==h)for(let s=0;s<=m;s++)u.push(s),s<0&&p.push(!1);else if(0===h)for(let s=0;s<m;s++)u.push(s),s<0&&p.push(!1);const[x,j]=(0,s.useState)(p);return{array:t,pagination:{itemsPerPage:n,indexPage:r,activePages:x,indexPages:u,setIndexPage:d,setActivePages:j}}},this.classType={classType:a}.classType}get value(){return this.getValue({defaultValue:""})}get data(){return this.getData()}}}}]);
//# sourceMappingURL=1812.dffcf019.chunk.js.map