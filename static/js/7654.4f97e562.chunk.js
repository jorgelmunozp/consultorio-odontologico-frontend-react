"use strict";(self.webpackChunkconsultorio_odontologico_frontend_react=self.webpackChunkconsultorio_odontologico_frontend_react||[]).push([[7654],{4346:()=>{},7654:(e,t,a)=>{a.r(t),a.d(t,{UpdateItem:()=>u,default:()=>m});a(4346);var o=a(5043),s=a(774),n=a(9999),l=a(437);var r=a(6213),c=a(579);const i=(0,o.lazy)(()=>a.e(7283).then(a.bind(a,7283))),d=(0,o.lazy)(()=>a.e(6794).then(a.bind(a,6794))),u=e=>{let{classType:t,Icon:a,item:u,urlApi:m,setOpen:p,handleItems:h}=e;const{theme:x}=(0,s.wR)(),{alert:b}=(0,l.Z)(),[y,f]=(0,o.useState)(null),g=(0,o.useMemo)(()=>{switch(t){case"cita":return{paciente:u[t].paciente,consultorio:u[t].consultorio,doctor:u[t].doctor,tratamiento:u[t].tratamiento};case"paciente":return{nombre:u[t].nombre,apellido:u[t].apellido,identificacion:u[t].identificacion,genero:u[t].genero,eps:u[t].eps};case"doctor":return{nombre:u[t].nombre,apellido:u[t].apellido,identificacion:u[t].identificacion,genero:u[t].genero,especialidad:u[t].especialidad};case"consultorio":return{numero:u[t].numero,nombre:u[t].nombre};case"especialidad":return{nombre:u[t].nombre};case"tratamiento":return{especialidad:u[t].especialidad,consultorio:u[t].consultorio,doctor:u[t].doctor};default:return{}}},[t,u]),j=(0,n.W)({classType:t,initialValues:g}).state,v=(0,o.useCallback)(()=>p(!1),[p]),w=(0,o.useCallback)(e=>f(t=>t===e?null:e),[]),N=(0,o.useCallback)(()=>{if(j.every(e=>""!==e.value)){j.forEach(e=>{u[t][e.key]=e.value});const e=JSON.stringify({[t]:u[t]});(async(e,t,a)=>{try{const o=await fetch(e+"/"+a,{method:"PUT",body:t,headers:{"Content-type":"application/json"}});return o.json(),200<=o.status&&o.status<=299?console.log("PUT "+o.status+" Actualizaci\xf3n exitosa"):400<=o.status&&o.status<=499?console.log("PUT "+o.status+" Actualizaci\xf3n fallida: Error en el env\xedo de datos"):500<=o.status&&o.status<=599&&console.log("PUT "+o.status+" Actualizaci\xf3n fallida: Error en el servidor remoto"),o.status}catch(o){const e=o.toString().split(":")[1].trim();"Failed to fetch"===e?console.log("Actualizaci\xf3n fallida: No hay conexi\xf3n con la base de datos"):console.log("Actualizaci\xf3n fallida: "+e)}})(m,e,u._id).then(async e=>{200<=e&&e<=299?(h("update",u._id,t),b({type:"success",title:"Actualizaci\xf3n exitosa",buttons:1})):b({type:"error",title:"Error en la actualizaci\xf3n",buttons:1})},e=>{b({type:"error",title:"Error en la actualizaci\xf3n",buttons:1}),console.log("Error Update: ",e)})}},[j,t,u,m,h,b]),k=(0,o.useMemo)(()=>j.map((e,t)=>(0,c.jsx)("div",{className:"row bg-row flex-nowrap",children:"dropdown"===e.type?(0,c.jsx)(d,{property:e,isOpen:y===e.key,onToggle:()=>w(e.key)}):(0,c.jsx)("div",{className:"col px-0",children:(0,c.jsx)(i,{property:!0,value:e.value,type:e.type,handleChange:e.handleChange,placeholder:e.key.charAt(0).toUpperCase()+e.key.slice(1),className:"input form-control rounded border-muted border-1 text-muted text-center shadow-sm"})})},"row"+t)),[j,y,w]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"modalContainer justify-items-center",children:(0,c.jsxs)("div",{className:"modalBox","data-theme":x,children:[(0,c.jsxs)("div",{className:"modalHeader",children:[(0,c.jsx)("center",{children:(0,c.jsx)(a,{color:r.et,height:2.5,width:2.5,strokeWidth:.6,className:"center"})}),(0,c.jsx)("h6",{className:"modalTitle main-color pt-2",children:"Actualizar "+t.charAt(0).toUpperCase()+t.slice(1)+"?"})]}),(0,c.jsx)("div",{className:"modalContent",children:(0,c.jsxs)("div",{className:"container-fluid modalTable mt-2",children:[(0,c.jsx)("div",{className:"row bg-row flex-nowrap",children:(0,c.jsx)(i,{placeholder:"C\xf3digo",value:u._id,type:"text",className:"input form-control rounded border-muted border-1 text-muted text-center shadow-sm pe-none"})}),k]})}),(0,c.jsx)("div",{className:"modalFooter",children:(0,c.jsxs)("div",{className:"d-flex mt-2 w-100",children:[(0,c.jsx)("button",{className:"aceptBtn w-100",onClick:()=>{N(),v()},children:"Actualizar"}),(0,c.jsx)("button",{className:"cancelBtn w-100",onClick:v,children:"Cancel"})]})})]})}),(0,c.jsx)("div",{className:"darkBackground",onClick:v})]})},m=(0,o.memo)(u)}}]);
//# sourceMappingURL=7654.4f97e562.chunk.js.map