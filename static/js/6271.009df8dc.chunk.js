"use strict";(self.webpackChunkconsultorio_odontologico_frontend_react=self.webpackChunkconsultorio_odontologico_frontend_react||[]).push([[6271],{698:(e,s,a)=>{a.r(s),a.d(s,{ItemsList:()=>b,default:()=>v});var t=a(4391),l=a(5043),o=a(6213),c=(a(3391),a(579));const r=e=>{let{classType:s,Icon:a,item:t,setOpen:l}=e;const r=Object.keys(t[s]),n=Object.values(t[s]);let i=[];n.forEach(e=>{"object"===typeof e?i.push(Object.values(e)[0]+" "+Object.values(e)[1]):i.push(e)});const d=()=>{l(!1),document.getElementById("modal").remove(),document.getElementById("body").classList.remove("noScroll")};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"modalContainer justify-items-center",children:(0,c.jsxs)("div",{className:"modalBox",children:[(0,c.jsxs)("div",{className:"modalHeader",children:[(0,c.jsx)("center",{children:(0,c.jsx)(a,{color:o.et,height:2.5,width:2.5,strokeWidth:.6,className:"center"})}),(0,c.jsx)("h6",{className:"modalTitle main-color pt-2",children:s.charAt(0).toUpperCase()+s.slice(1)})]}),(0,c.jsx)("div",{className:"modalContent",children:(0,c.jsxs)("div",{className:"container-fluid modalTable mt-2 overflow-auto",children:[(0,c.jsxs)("div",{className:"row modalTableTitle flex-nowrap",children:[(0,c.jsx)("div",{className:"col-6",children:"Par\xe1metro"}),(0,c.jsx)("div",{className:"col-6",children:"Datos"})]}),(0,c.jsxs)("div",{className:"row flex-nowrap",children:[(0,c.jsx)("div",{className:"col-6 modalTableData text-start",children:"C\xf3digo"}),(0,c.jsx)("div",{className:"col-6 modalTableData text-start",children:t.id})]}),i.map((e,s)=>(0,c.jsxs)("div",{className:"row flex-nowrap",children:[(0,c.jsx)("div",{className:"col-6 modalTableData text-start",children:r[s].charAt(0).toUpperCase()+r[s].slice(1)}),(0,c.jsx)("div",{className:"col-6 modalTableData text-start",children:e})]},r[s].toLowerCase()))]})}),(0,c.jsx)("div",{className:"modalFooter",children:(0,c.jsx)("div",{className:"d-grid mt-2 w-100",children:(0,c.jsx)("button",{className:"aceptBtn mx-auto w-50",onClick:d,children:"Aceptar"})})})]})}),(0,c.jsx)("div",{className:"darkBackground",onClick:d})]})};var n=a(4446),i=a(5186);var d=a(7466),m=a(7283);const h=e=>{let{classType:s,Icon:a,item:l,urlApi:r,setOpen:h,objectClass:p,icons:u}=e;u[s].IconSearch,u[s].IconEdit,u[s].IconDelete;let j={};switch(s){case"cita":j=p.getState({pac:l[s].paciente,cons:l[s].consultorio,doc:l[s].doctor,trat:l[s].tratamiento});break;case"paciente":j=p.getState({nomb:l[s].nombre,ape:l[s].apellido,id:l[s].identificacion,gen:l[s].genero,eps_:l[s].eps});break;case"doctor":j=p.getState({nomb:l[s].nombre,ape:l[s].apellido,id:l[s].identificacion,gen:l[s].genero,esp:l[s].especialidad});break;case"consultorio":j=p.getState({num:l[s].numero,nomb:l[s].nombre});break;case"tratamiento":j=p.getState({esp:l[s].especialidad,cons:l[s].consultorio,doc:l[s].doctor})}const b=()=>{h(!1),document.getElementById("modal").remove(),document.getElementById("body").classList.remove("noScroll")},v=()=>{if(0===j.filter(e=>""===e.value).length){j.forEach(e=>{l[s][e.key]=e.value});const e=(async(e,s,a)=>{try{const t=await fetch(e+"/"+a,{method:"PUT",body:s,headers:{"Content-type":"application/json"}});return t.json(),200<=t.status&&t.status<=299?console.log("PUT "+t.status+" Actualizaci\xf3n exitosa"):400<=t.status&&t.status<=499?console.log("PUT "+t.status+" Actualizaci\xf3n fallida: Error en el env\xedo de datos"):500<=t.status&&t.status<=599&&console.log("PUT "+t.status+" Actualizaci\xf3n fallida: Error en el servidor remoto"),t.status}catch(t){const e=t.toString().split(":")[1].trim();"Failed to fetch"===e?console.log("Registro fallido: No hay conexi\xf3n con la base de datos"):console.log("Registro fallido: "+e)}})(r,JSON.stringify(l),l.id);e.then(async function(e){if(200<=e&&e<=299){await fetch(r).then(e=>e.json());(0,t.H)(document.getElementById("row"+s+l.id)).render((0,c.jsx)(x,{classType:s,icons:u,item:l,urlApi:r,objectClass:p})),(0,n.F)({type:"success",title:"Actualizaci\xf3n exitosa"}).launch()}else(0,n.F)({type:"error",title:"Error en la actualizaci\xf3n"}).launch()},function(e){(0,n.F)({type:"error",title:"Error en la actualizaci\xf3n"}).launch(),console.log("Error Update: ",e)})}};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"modalContainer justify-items-center",children:(0,c.jsxs)("div",{className:"modalBox",children:[(0,c.jsxs)("div",{className:"modalHeader",children:[(0,c.jsx)("center",{children:(0,c.jsx)(a,{color:o.et,height:2.5,width:2.5,strokeWidth:.6,className:"center"})}),(0,c.jsx)("h6",{className:"modalTitle main-color pt-2",children:"Actualizar "+s.charAt(0).toUpperCase()+s.slice(1)+"?"})]}),(0,c.jsx)("div",{className:"modalContent",children:(0,c.jsxs)("div",{className:"container-fluid modalTable mt-2",children:[(0,c.jsx)("div",{className:"row",children:(0,c.jsx)(m.Input,{placeholder:"C\xf3digo",defaultValue:l.id,type:"number",className:"input form-control rounded border-muted border-1 text-muted text-center shadow-sm pe-none"})}),j.map((e,s)=>{const a=new i.m({classType:e.key}),{array:t,pagination:l}=a.getData();return(0,c.jsx)("div",{className:"row",children:"dropdown"===e.type?(0,c.jsx)(d.m,{classType:e.key,object:a,array:t,defaultSelect:e.value,handleChange:e.handleChange,placeholder:e.key.charAt(0).toUpperCase()+e.key.slice(1),pagination:l,className:"input form-control rounded border-muted border-1 text-muted shadow-sm"}):(0,c.jsx)(m.Input,{property:!0,defaultValue:e.value,type:e.type,onChange:e.handleChange,placeholder:e.key.charAt(0).toUpperCase()+e.key.slice(1),className:"input form-control rounded border-muted border-1 text-muted text-center shadow-sm"})},s)})]})}),(0,c.jsx)("div",{className:"modalFooter",children:(0,c.jsxs)("div",{className:"d-flex mt-2 w-100",children:[(0,c.jsx)("button",{className:"aceptBtn w-100",onClick:()=>{v(),b()},children:"Actualizar"}),(0,c.jsx)("button",{className:"cancelBtn w-100",onClick:b,children:"Cancel"})]})})]})}),(0,c.jsx)("div",{className:"darkBackground",onClick:b})]})};var p=a(2179);const u=e=>{let{classType:s,Icon:a=p.Warning,item:l,urlApi:o,setOpen:r}=e;const i=Object.keys(l[s]),d=Object.values(l[s]);let m=[];d.forEach(e=>{"object"===typeof e?m.push(Object.values(e)[0]+" "+Object.values(e)[1]):m.push(e)});const h=()=>{r(!1),document.getElementById("modal").remove(),document.getElementById("body").classList.remove("noScroll")},u=()=>{const e=(async(e,s)=>{try{const a=await fetch(e+"/"+s,{method:"DELETE",headers:{"Content-type":"application/json"}});return a.json(),200<=a.status&&a.status<=299?console.log("DELETE "+a.status+" Registro eliminado"):400<=a.status&&a.status<=499?console.log("DELETE "+a.status+" Eliminaci\xf3n fallida: Error en el env\xedo de datos"):500<=a.status&&a.status<=599&&console.log("DELETE "+a.status+" Eliminaci\xf3n fallida: Error en el servidor remoto"),a.status}catch(a){const e=a.toString().split(":")[1].trim();"Failed to fetch"===e?console.log("Eliminaci\xf3n fallida: No hay conexi\xf3n con la base de datos"):console.log("Eliminaci\xf3n fallida: "+e)}})(o,l.id);e.then(async function(e){if(200<=e&&e<=299){await fetch(o).then(e=>e.json());(0,t.H)(document.getElementById("row"+l.id)).render(),(0,n.F)({type:"success",title:"Eliminaci\xf3n exitosa"}).launch()}else(0,n.F)({type:"error",title:"Error en la eliminaci\xf3n"}).launch()},function(e){(0,n.F)({type:"error",title:"Error en la eliminaci\xf3n"}).launch(),console.log("Error en la eliminaci\xf3n: ",e)})};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"modalContainer justify-items-center",children:(0,c.jsxs)("div",{className:"modalBox",children:[(0,c.jsxs)("div",{className:"modalHeader",children:[(0,c.jsx)("center",{children:(0,c.jsx)(a,{color:"#f8bb86",height:3,width:3,className:"center"})}),(0,c.jsx)("h6",{className:"modalTitle main-color pt-2",children:"Eliminar "+s.charAt(0).toUpperCase()+s.slice(1)+"?"})]}),(0,c.jsx)("div",{className:"modalContent",children:(0,c.jsxs)("div",{className:"container-fluid modalTable mt-2 overflow-auto",children:[(0,c.jsxs)("div",{className:"row modalTableTitle flex-nowrap",children:[(0,c.jsx)("div",{className:"col-6",children:"Par\xe1metro"}),(0,c.jsx)("div",{className:"col-6",children:"Datos"})]}),(0,c.jsxs)("div",{className:"row flex-nowrap",children:[(0,c.jsx)("div",{className:"col-6 modalTableData text-start",children:"C\xf3digo"}),(0,c.jsx)("div",{className:"col-6 modalTableData text-start",children:l.id})]}),m.map((e,s)=>(0,c.jsxs)("div",{className:"row flex-nowrap",children:[(0,c.jsx)("div",{className:"col-6 modalTableData text-start",children:i[s].charAt(0).toUpperCase()+i[s].slice(1)}),(0,c.jsx)("div",{className:"col-6 modalTableData text-start",children:e})]},i[s].toLowerCase()))]})}),(0,c.jsx)("div",{className:"modalFooter",children:(0,c.jsxs)("div",{className:"d-flex mt-2 w-100",children:[(0,c.jsx)("button",{className:"aceptBtn w-100",onClick:()=>{u(),h()},children:"Eliminar"}),(0,c.jsx)("button",{className:"cancelBtn w-100",onClick:h,children:"Cancel"})]})})]})}),(0,c.jsx)("div",{className:"darkBackground",onClick:h})]})},x=e=>{let{classType:s,icons:a,item:o,urlApi:n,objectClass:i}=e;const[d,m]=(0,l.useState)(!1),p=a[s].IconRead,x=a[s].IconSearch,j=a[s].IconEdit,b=a[s].IconDelete,v=["paciente","doctor","consultorio","tratamiento","especialidad","genero","eps"];!1!==d?document.getElementById("body").classList.add("noScroll"):document.getElementById("body").classList.remove("noScroll");let N="";if(!1!==d){switch(document.getElementById("root").insertAdjacentHTML("afterend",'<div id="modal"></div>'),N=(0,t.H)(document.getElementById("modal")),d){case"read":N.render((0,c.jsx)(r,{classType:s,Icon:p,item:o,setOpen:m}));break;case"update":N.render((0,c.jsx)(h,{classType:s,Icon:j,item:o,urlApi:n,setOpen:m,objectClass:i,icons:a}));break;case"delete":N.render((0,c.jsx)(u,{classType:s,item:o,urlApi:n,setOpen:m}))}m(!1)}return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"col-3 col-sm-2 text-nowrap",children:o.id}),Object.entries(o[s]).map((e,s)=>(0,c.jsx)("div",{className:"text-start text-nowrap"+(v.includes(e[0])?" col-6 col-sm-3":" col-4 col-sm-2"),children:e[1]},"item"+s)),(0,c.jsx)("div",{className:"col",children:(0,c.jsx)("button",{className:"border-0 bg-transparent queryBtn",onClick:()=>m("read"),children:(0,c.jsx)(x,{})})}),(0,c.jsx)("div",{className:"col",children:(0,c.jsx)("button",{className:"border-0 bg-transparent queryBtn",onClick:()=>m("update"),children:(0,c.jsx)(j,{})})}),(0,c.jsx)("div",{className:"col",children:(0,c.jsx)("button",{className:"border-0 bg-transparent queryBtn",onClick:()=>m("delete"),children:(0,c.jsx)(b,{})})})]})},j=e=>{let{direction:s}=e;switch(s){case"up":return"\u25b4";case"down":return"\u25be"}},b=e=>{let{classType:s,icons:a,titles:t,urlApi:l,array:o,objectClass:r,SortByProperty:n,setSortBy:i,indexPage:d}=e;return(0,c.jsxs)("div",{className:"container-fluid border overflow-auto px-0",children:[(0,c.jsxs)("div",{className:"row flex-nowrap bg-main-color",children:[(0,c.jsx)("span",{className:"col-3 col-sm-2 bg-main-color border-bottom border-dark text-center pe-3 pe-sm-5",children:(0,c.jsxs)("div",{className:"row bg-main-color justify-content-between",children:[(0,c.jsx)("div",{className:"col-3 col-sm-1 align-self-center white-color",children:"C\xf3digo"}),(0,c.jsxs)("div",{className:"col-2",children:[(0,c.jsx)("div",{className:"row lh-1",children:(0,c.jsx)("button",{className:"border-0 bg-transparent dark-color-hover white-color fs-5 pt-0 pb-0 px-0 ms-2 ms-sm-3",onClick:()=>i(1),children:(0,c.jsx)(j,{direction:"up"})})}),(0,c.jsx)("div",{className:"row lh-1",children:(0,c.jsx)("button",{className:"border-0 bg-transparent dark-color-hover white-color fs-5 pt-0 pb-0 px-0 ms-2 ms-sm-3",onClick:()=>i(2),children:(0,c.jsx)(j,{direction:"down"})})})]})]})}),t.map((e,s)=>(0,c.jsx)("span",{className:"bg-main-color border-bottom border-dark text-center pe-3 pe-sm-5"+("dropdown"===e.type?" col-6 col-sm-3":" col-4 col-sm-2"),children:(0,c.jsxs)("div",{className:"row bg-main-color justify-content-between",children:[(0,c.jsx)("div",{className:"col-3 col-sm-1 align-self-center white-color",children:e.title}),(0,c.jsxs)("div",{className:"col-2",children:[(0,c.jsx)("div",{className:"row lh-1",children:(0,c.jsx)("button",{className:"border-0 bg-transparent dark-color-hover white-color fs-5 pt-0 pb-0 px-0 ms-2 ms-sm-3",onClick:()=>i(1+2*(s+1)),children:(0,c.jsx)(j,{direction:"up"})})}),(0,c.jsx)("div",{className:"row lh-1",children:(0,c.jsx)("button",{className:"border-0 bg-transparent dark-color-hover white-color fs-5 pt-0 pb-0 px-0 ms-2 ms-sm-3",onClick:()=>i(2+2*(s+1)),children:(0,c.jsx)(j,{direction:"down"})})})]})]})},"title"+s)),(0,c.jsx)("div",{className:"col-8 col-sm-3 bg-main-color border-bottom border-dark"}),"        "]}),o.sort(n).slice(d[0],d[1]).map(e=>(0,c.jsx)("div",{id:"row"+s+e.id,className:"row flex-nowrap border-bottom text-start text-nowrap py-2",children:(0,c.jsx)(x,{classType:s,icons:a,item:e,urlApi:l,objectClass:r})},e.id))]})},v=b}}]);
//# sourceMappingURL=6271.009df8dc.chunk.js.map