"use strict";(self.webpackChunkconsultorio_odontologico_frontend_react=self.webpackChunkconsultorio_odontologico_frontend_react||[]).push([[698],{698:(e,t,a)=>{a.r(t),a.d(t,{ItemsList:()=>b,default:()=>g});var s=a(4391),l=a(5043),o=a(6213),c=(a(3391),a(579));const r=e=>{let{classType:t,Icon:a,item:s,setOpen:l}=e;const r=Object.keys(s[t]),n=Object.values(s[t]);let i=[];n.forEach(e=>{"object"===typeof e?i.push(Object.values(e)[0]+" "+Object.values(e)[1]):i.push(e)});const d=()=>{l(!1),document.getElementById("modal").remove(),document.getElementById("body").classList.remove("noScroll")};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"modalContainer justify-items-center",children:(0,c.jsxs)("div",{className:"modalBox",children:[(0,c.jsxs)("div",{className:"modalHeader",children:[(0,c.jsx)("center",{children:(0,c.jsx)(a,{color:o.et,height:2.5,width:2.5,strokeWidth:.6,className:"center"})}),(0,c.jsx)("h6",{className:"modalTitle main-color pt-2",children:t.charAt(0).toUpperCase()+t.slice(1)})]}),(0,c.jsx)("div",{className:"modalContent",children:(0,c.jsxs)("div",{className:"container-fluid modalTable mt-2 overflow-auto",children:[(0,c.jsxs)("div",{className:"row modalTableTitle flex-nowrap",children:[(0,c.jsx)("div",{className:"col-6",children:"Par\xe1metro"}),(0,c.jsx)("div",{className:"col-6",children:"Datos"})]}),(0,c.jsxs)("div",{className:"row flex-nowrap",children:[(0,c.jsx)("div",{className:"col-6 modalTableData text-start",children:"C\xf3digo"}),(0,c.jsx)("div",{className:"col-6 modalTableData text-start",children:s.id})]}),i.map((e,t)=>(0,c.jsxs)("div",{className:"row flex-nowrap",children:[(0,c.jsx)("div",{className:"col-6 modalTableData text-start",children:r[t].charAt(0).toUpperCase()+r[t].slice(1)}),(0,c.jsx)("div",{className:"col-6 modalTableData text-start",children:e})]},r[t].toLowerCase()))]})}),(0,c.jsx)("div",{className:"modalFooter",children:(0,c.jsx)("div",{className:"d-grid mt-2 w-100",children:(0,c.jsx)("button",{className:"aceptBtn mx-auto w-50",onClick:d,children:"Aceptar"})})})]})}),(0,c.jsx)("div",{className:"darkBackground",onClick:d})]})};var n=a(4446),i=a(5186);var d=a(7466),m=a(7283);const h=e=>{let{classType:t,Icon:a,item:l,urlApi:r,setOpen:h,objectClass:p,icons:u}=e;u[t].IconSearch,u[t].IconEdit,u[t].IconDelete;let j={};switch(t){case"cita":j=p.getState({pac:l[t].paciente,cons:l[t].consultorio,doc:l[t].doctor,trat:l[t].tratamiento});break;case"paciente":j=p.getState({nomb:l[t].nombre,ape:l[t].apellido,id:l[t].identificacion,gen:l[t].genero,eps_:l[t].eps});break;case"doctor":j=p.getState({nomb:l[t].nombre,ape:l[t].apellido,id:l[t].identificacion,gen:l[t].genero,esp:l[t].especialidad});break;case"consultorio":j=p.getState({num:l[t].numero,nomb:l[t].nombre});break;case"tratamiento":j=p.getState({esp:l[t].especialidad,cons:l[t].consultorio,doc:l[t].doctor})}const b=()=>{h(!1),document.getElementById("modal").remove(),document.getElementById("body").classList.remove("noScroll")},g=()=>{if(0===j.filter(e=>""===e.value).length){j.forEach(e=>{l[t][e.key]=e.value});const e=(async(e,t,a)=>{try{const s=await fetch(e+"/"+a,{method:"PUT",body:t,headers:{"Content-type":"application/json"}});return s.json(),200<=s.status&&s.status<=299?console.log("PUT "+s.status+" Actualizaci\xf3n exitosa"):400<=s.status&&s.status<=499?console.log("PUT "+s.status+" Actualizaci\xf3n fallida: Error en el env\xedo de datos"):500<=s.status&&s.status<=599&&console.log("PUT "+s.status+" Actualizaci\xf3n fallida: Error en el servidor remoto"),s.status}catch(s){const e=s.toString().split(":")[1].trim();"Failed to fetch"===e?console.log("Registro fallido: No hay conexi\xf3n con la base de datos"):console.log("Registro fallido: "+e)}})(r,JSON.stringify(l),l.id);e.then(async function(e){if(200<=e&&e<=299){await fetch(r).then(e=>e.json());(0,s.H)(document.getElementById("row"+t+l.id)).render((0,c.jsx)(x,{classType:t,icons:u,item:l,urlApi:r,objectClass:p})),(0,n.F)({type:"success",title:"Actualizaci\xf3n exitosa"}).launch()}else(0,n.F)({type:"error",title:"Error en la actualizaci\xf3n"}).launch()},function(e){(0,n.F)({type:"error",title:"Error en la actualizaci\xf3n"}).launch(),console.log("Error Update: ",e)})}};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"modalContainer justify-items-center",children:(0,c.jsxs)("div",{className:"modalBox",children:[(0,c.jsxs)("div",{className:"modalHeader",children:[(0,c.jsx)("center",{children:(0,c.jsx)(a,{color:o.et,height:2.5,width:2.5,strokeWidth:.6,className:"center"})}),(0,c.jsx)("h6",{className:"modalTitle main-color pt-2",children:"Actualizar "+t.charAt(0).toUpperCase()+t.slice(1)+"?"})]}),(0,c.jsx)("div",{className:"modalContent",children:(0,c.jsxs)("div",{className:"container-fluid modalTable mt-2",children:[(0,c.jsx)("div",{className:"row",children:(0,c.jsx)(m.p,{placeholder:"C\xf3digo",defaultValue:l.id,type:"number",className:"input form-control rounded border-muted border-1 text-muted text-center shadow-sm pe-none"})}),j.map((e,t)=>{const a=new i.m({classType:e.key}),{array:s,pagination:l}=a.getData();return(0,c.jsx)("div",{className:"row",children:"dropdown"===e.type?(0,c.jsx)(d.m,{classType:e.key,object:a,array:s,defaultSelect:e.value,handleChange:e.handleChange,placeholder:e.key.charAt(0).toUpperCase()+e.key.slice(1),pagination:l,className:"input form-control rounded border-muted border-1 text-muted shadow-sm"}):(0,c.jsx)(m.p,{property:!0,defaultValue:e.value,type:e.type,onChange:e.handleChange,placeholder:e.key.charAt(0).toUpperCase()+e.key.slice(1),className:"input form-control rounded border-muted border-1 text-muted text-center shadow-sm"})},t)})]})}),(0,c.jsx)("div",{className:"modalFooter",children:(0,c.jsxs)("div",{className:"d-flex mt-2 w-100",children:[(0,c.jsx)("button",{className:"aceptBtn w-100",onClick:()=>{g(),b()},children:"Actualizar"}),(0,c.jsx)("button",{className:"cancelBtn w-100",onClick:b,children:"Cancel"})]})})]})}),(0,c.jsx)("div",{className:"darkBackground",onClick:b})]})};var p=a(2179);const u=e=>{let{classType:t,Icon:a=p.N,item:l,urlApi:o,setOpen:r}=e;const i=Object.keys(l[t]),d=Object.values(l[t]);let m=[];d.forEach(e=>{"object"===typeof e?m.push(Object.values(e)[0]+" "+Object.values(e)[1]):m.push(e)});const h=()=>{r(!1),document.getElementById("modal").remove(),document.getElementById("body").classList.remove("noScroll")},u=()=>{const e=(async(e,t)=>{try{const a=await fetch(e+"/"+t,{method:"DELETE",headers:{"Content-type":"application/json"}});return a.json(),200<=a.status&&a.status<=299?console.log("DELETE "+a.status+" Registro eliminado"):400<=a.status&&a.status<=499?console.log("DELETE "+a.status+" Eliminaci\xf3n fallida: Error en el env\xedo de datos"):500<=a.status&&a.status<=599&&console.log("DELETE "+a.status+" Eliminaci\xf3n fallida: Error en el servidor remoto"),a.status}catch(a){const e=a.toString().split(":")[1].trim();"Failed to fetch"===e?console.log("Eliminaci\xf3n fallida: No hay conexi\xf3n con la base de datos"):console.log("Eliminaci\xf3n fallida: "+e)}})(o,l.id);e.then(async function(e){if(200<=e&&e<=299){await fetch(o).then(e=>e.json());(0,s.H)(document.getElementById("row"+l.id)).render(),(0,n.F)({type:"success",title:"Eliminaci\xf3n exitosa"}).launch()}else(0,n.F)({type:"error",title:"Error en la eliminaci\xf3n"}).launch()},function(e){(0,n.F)({type:"error",title:"Error en la eliminaci\xf3n"}).launch(),console.log("Error en la eliminaci\xf3n: ",e)})};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"modalContainer justify-items-center",children:(0,c.jsxs)("div",{className:"modalBox",children:[(0,c.jsxs)("div",{className:"modalHeader",children:[(0,c.jsx)("center",{children:(0,c.jsx)(a,{color:"#f8bb86",height:3,width:3,className:"center"})}),(0,c.jsx)("h6",{className:"modalTitle main-color pt-2",children:"Eliminar "+t.charAt(0).toUpperCase()+t.slice(1)+"?"})]}),(0,c.jsx)("div",{className:"modalContent",children:(0,c.jsxs)("div",{className:"container-fluid modalTable mt-2 overflow-auto",children:[(0,c.jsxs)("div",{className:"row modalTableTitle flex-nowrap",children:[(0,c.jsx)("div",{className:"col-6",children:"Par\xe1metro"}),(0,c.jsx)("div",{className:"col-6",children:"Datos"})]}),(0,c.jsxs)("div",{className:"row flex-nowrap",children:[(0,c.jsx)("div",{className:"col-6 modalTableData text-start",children:"C\xf3digo"}),(0,c.jsx)("div",{className:"col-6 modalTableData text-start",children:l.id})]}),m.map((e,t)=>(0,c.jsxs)("div",{className:"row flex-nowrap",children:[(0,c.jsx)("div",{className:"col-6 modalTableData text-start",children:i[t].charAt(0).toUpperCase()+i[t].slice(1)}),(0,c.jsx)("div",{className:"col-6 modalTableData text-start",children:e})]},i[t].toLowerCase()))]})}),(0,c.jsx)("div",{className:"modalFooter",children:(0,c.jsxs)("div",{className:"d-flex mt-2 w-100",children:[(0,c.jsx)("button",{className:"aceptBtn w-100",onClick:()=>{u(),h()},children:"Eliminar"}),(0,c.jsx)("button",{className:"cancelBtn w-100",onClick:h,children:"Cancel"})]})})]})}),(0,c.jsx)("div",{className:"darkBackground",onClick:h})]})},x=e=>{let{classType:t,icons:a,item:o,urlApi:n,objectClass:i}=e;const[d,m]=(0,l.useState)(!1),p=a[t].IconRead,x=a[t].IconSearch,j=a[t].IconEdit,b=a[t].IconDelete,g=["paciente","doctor","consultorio","tratamiento","especialidad","genero","eps"];!1!==d?document.getElementById("body").classList.add("noScroll"):document.getElementById("body").classList.remove("noScroll");let v="";if(!1!==d){switch(document.getElementById("root").insertAdjacentHTML("afterend",'<div id="modal"></div>'),v=(0,s.H)(document.getElementById("modal")),d){case"read":v.render((0,c.jsx)(r,{classType:t,Icon:p,item:o,setOpen:m}));break;case"update":v.render((0,c.jsx)(h,{classType:t,Icon:j,item:o,urlApi:n,setOpen:m,objectClass:i,icons:a}));break;case"delete":v.render((0,c.jsx)(u,{classType:t,item:o,urlApi:n,setOpen:m}))}m(!1)}return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"col-3 col-sm-2 text-nowrap",children:o.id}),Object.entries(o[t]).map((e,t)=>(0,c.jsx)("div",{className:"text-start text-nowrap"+(g.includes(e[0])?" col-6 col-sm-3":" col-4 col-sm-2"),children:e[1]},"item"+t)),(0,c.jsx)("div",{className:"col",children:(0,c.jsx)("button",{className:"border-0 bg-transparent queryBtn",onClick:()=>m("read"),children:(0,c.jsx)(x,{})})}),(0,c.jsx)("div",{className:"col",children:(0,c.jsx)("button",{className:"border-0 bg-transparent queryBtn",onClick:()=>m("update"),children:(0,c.jsx)(j,{})})}),(0,c.jsx)("div",{className:"col",children:(0,c.jsx)("button",{className:"border-0 bg-transparent queryBtn",onClick:()=>m("delete"),children:(0,c.jsx)(b,{})})})]})},j=e=>{let{direction:t}=e;switch(t){case"up":return"\u25b4";case"down":return"\u25be"}},b=e=>{let{classType:t,icons:a,titles:s,urlApi:l,array:o,objectClass:r,SortByProperty:n,setSortBy:i,indexPage:d}=e;return(0,c.jsxs)("div",{className:"container-fluid border overflow-auto px-0",children:[(0,c.jsxs)("div",{className:"row flex-nowrap bg-main-color",children:[(0,c.jsx)("span",{className:"col-3 col-sm-2 bg-main-color border-bottom border-dark text-center pe-3 pe-sm-5",children:(0,c.jsxs)("div",{className:"row bg-main-color justify-content-between",children:[(0,c.jsx)("div",{className:"col-3 col-sm-1 align-self-center white-color",children:"C\xf3digo"}),(0,c.jsxs)("div",{className:"col-2",children:[(0,c.jsx)("div",{className:"row lh-1",children:(0,c.jsx)("button",{className:"border-0 bg-transparent dark-color-hover white-color fs-5 pt-0 pb-0 px-0 ms-2 ms-sm-3",onClick:()=>i(1),children:(0,c.jsx)(j,{direction:"up"})})}),(0,c.jsx)("div",{className:"row lh-1",children:(0,c.jsx)("button",{className:"border-0 bg-transparent dark-color-hover white-color fs-5 pt-0 pb-0 px-0 ms-2 ms-sm-3",onClick:()=>i(2),children:(0,c.jsx)(j,{direction:"down"})})})]})]})}),s.map((e,t)=>(0,c.jsx)("span",{className:"bg-main-color border-bottom border-dark text-center pe-3 pe-sm-5"+("dropdown"===e.type?" col-6 col-sm-3":" col-4 col-sm-2"),children:(0,c.jsxs)("div",{className:"row bg-main-color justify-content-between",children:[(0,c.jsx)("div",{className:"col-3 col-sm-1 align-self-center white-color",children:e.title}),(0,c.jsxs)("div",{className:"col-2",children:[(0,c.jsx)("div",{className:"row lh-1",children:(0,c.jsx)("button",{className:"border-0 bg-transparent dark-color-hover white-color fs-5 pt-0 pb-0 px-0 ms-2 ms-sm-3",onClick:()=>i(1+2*(t+1)),children:(0,c.jsx)(j,{direction:"up"})})}),(0,c.jsx)("div",{className:"row lh-1",children:(0,c.jsx)("button",{className:"border-0 bg-transparent dark-color-hover white-color fs-5 pt-0 pb-0 px-0 ms-2 ms-sm-3",onClick:()=>i(2+2*(t+1)),children:(0,c.jsx)(j,{direction:"down"})})})]})]})},"title"+t)),(0,c.jsx)("div",{className:"col-8 col-sm-3 bg-main-color border-bottom border-dark"}),"        "]}),o.sort(n).slice(d[0],d[1]).map(e=>(0,c.jsx)("div",{id:"row"+t+e.id,className:"row flex-nowrap border-bottom text-start text-nowrap py-2",children:(0,c.jsx)(x,{classType:t,icons:a,item:e,urlApi:l,objectClass:r})},e.id))]})},g=b},5186:(e,t,a)=>{a.d(t,{m:()=>c});var s=a(5043),l=a(4446),o=a(5356);class c{constructor(e){let{classType:t=""}=e;this.getValue=e=>{let{defaultValue:t=""}=e,[a,l]=(0,s.useState)(t);return{value:a,setValue:l}},this.getData=()=>{let e=[],t="";switch(this.classType){case"paciente":t="http://192.168.18.249:3000/pacientes";break;case"doctor":t="http://192.168.18.249:3000/doctores";break;case"consultorio":t="http://192.168.18.249:3000/consultorios";break;case"tratamiento":t="http://192.168.18.249:3000/tratamientos";break;case"eps":t="http://192.168.18.249:3000/epss";break;case"genero":t="http://192.168.18.249:3000/generos";break;case"especialidad":t="http://192.168.18.249:3000/especialidades"}const a=(0,o.s)(t);(0,s.useEffect)(()=>{a.status>=400&&(0,l.F)({type:"error",title:"Error en la conexi\xf3n con la base de datos"}).launch()},[a]),void 0!==a.data.length&&(e=a.data);const[c,r]=(0,s.useState)(5),[n,i]=(0,s.useState)([0,c]),d=Math.floor(e.length/c),m=e.length%c;let h=[],p=[!0];if(0!==m)for(let s=0;s<=d;s++)h.push(s),s<0&&p.push(!1);else if(0===m)for(let s=0;s<d;s++)h.push(s),s<0&&p.push(!1);const[u,x]=(0,s.useState)(p);return{array:e,pagination:{itemsPerPage:c,indexPage:n,activePages:u,indexPages:h,setIndexPage:i,setActivePages:x}}},this.classType={classType:t}.classType}get value(){return this.getValue({defaultValue:""})}get data(){return this.getData()}}},7466:(e,t,a)=>{a.d(t,{m:()=>i});var s=a(5043),l=a(2864),o=(a(6587),a(1279)),c=a.n(o),r=a(4420),n=a(579);const i=e=>{let{classType:t,object:a,placeholder:o="",array:c=[],defaultSelect:r="",handleChange:i,pagination:m,className:h=""}=e;const[p,u]=(0,s.useState)(!1);let{value:x,setValue:j}=a.getValue({defaultValue:r});return(0,n.jsxs)("div",{className:"dropdown form-floating w-100 min-width-10 py-sm-0 px-0",children:[(0,n.jsx)("button",{onClick:()=>u(!1===p),onChange:i,className:h+(0===x.length?" dropdown-toggle text-start pt-2 ps-2 ps-sm-3 pe-5 w-100":" dropdown-toggle text-center pt-4 ps-2 ps-sm-3 pe-5 w-100"),type:"button",id:"selectButton"+t,"data-bs-target":"#dropdownMenu"+t,"aria-controls":"dropdownMenu"+t,"aria-expanded":"false",children:0===x.length?o:x}),(0,n.jsx)("label",{htmlFor:"selectButton",className:"form-label text-muted text-nowrap text-truncate",children:0===x.length?"":o}),(0,n.jsxs)("ul",{id:"dropdownMenu"+t,className:"dropdown-menu text-center shadow-sm w-100 overflow-auto slideIn smooth"+(p?" collapse show":""),style:0===c.length?{maxHeight:"0rem"}:{maxHeight:"12rem"},"aria-labelledby":"selectButton",children:[c.slice(m.indexPage[0],m.indexPage[1]).map((e,a)=>{switch(t){case"paciente":case"doctor":x=e[t].nombre+" "+e[t].apellido;break;case"consultorio":x=e[t].numero+" "+e[t].nombre;break;case"tratamiento":x=e[t].especialidad;break;case"eps":case"genero":case"especialidad":x=e[t].nombre}return(0,n.jsx)(d,{value:x,setValue:j,setOpen:u,handleChange:i},t+"Option"+a)}),(0,n.jsx)(l.Y,{array:c,itemsPerPage:m.itemsPerPage,indexPage:m.indexPage,activePages:m.activePages,indexPages:m.indexPages,setIndexPage:m.setIndexPage,setActivePages:m.setActivePages})]})]})},d=e=>{let{value:t,setValue:a,setOpen:s,handleChange:l}=e;return(0,n.jsx)("li",{children:(0,n.jsx)("button",{className:"dropdown-item",value:c()(t,"3lC0nsult0r10"),onClick:e=>{a((0,r.s)(e.target.value)),s(!1),l(e)},children:t})})}}}]);
//# sourceMappingURL=698.94ed302f.chunk.js.map