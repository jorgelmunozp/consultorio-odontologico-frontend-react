"use strict";(self.webpackChunkconsultorio_odontologico_frontend_react=self.webpackChunkconsultorio_odontologico_frontend_react||[]).push([[7654],{7654:(e,a,t)=>{t.r(a),t.d(a,{UpdateItem:()=>u,default:()=>m});t(4346);var o=t(5043),s=t(774),n=t(9999),l=t(437);var r=t(6213),c=t(579);const i=(0,o.lazy)(()=>t.e(7283).then(t.bind(t,7283))),d=(0,o.lazy)(()=>t.e(7466).then(t.bind(t,7466))),u=e=>{let{classType:a,Icon:t,item:u,urlApi:m,setOpen:p,handleItems:h}=e;const{theme:x}=(0,s.wR)(),{alert:b}=(0,l.Z)(),[y,f]=(0,o.useState)(null),g=(0,o.useMemo)(()=>{switch(a){case"cita":return{paciente:u[a].paciente,consultorio:u[a].consultorio,doctor:u[a].doctor,tratamiento:u[a].tratamiento};case"paciente":return{nombre:u[a].nombre,apellido:u[a].apellido,identificacion:u[a].identificacion,genero:u[a].genero,eps:u[a].eps};case"doctor":return{nombre:u[a].nombre,apellido:u[a].apellido,identificacion:u[a].identificacion,genero:u[a].genero,especialidad:u[a].especialidad};case"consultorio":return{numero:u[a].numero,nombre:u[a].nombre};case"especialidad":return{nombre:u[a].nombre};case"tratamiento":return{especialidad:u[a].especialidad,consultorio:u[a].consultorio,doctor:u[a].doctor};default:return{}}},[a,u]),j=(0,n.W)({classType:a,initialValues:g}).state,v=(0,o.useCallback)(()=>p(!1),[p]),w=(0,o.useCallback)(e=>f(a=>a===e?null:e),[]),N=(0,o.useCallback)(()=>{if(j.every(e=>""!==e.value)){j.forEach(e=>{u[a][e.key]=e.value});const e=JSON.stringify({[a]:u[a]});(async(e,a,t)=>{try{const o=await fetch(e+"/"+t,{method:"PUT",body:a,headers:{"Content-type":"application/json"}});return o.json(),200<=o.status&&o.status<=299?console.log("PUT "+o.status+" Actualizaci\xf3n exitosa"):400<=o.status&&o.status<=499?console.log("PUT "+o.status+" Actualizaci\xf3n fallida: Error en el env\xedo de datos"):500<=o.status&&o.status<=599&&console.log("PUT "+o.status+" Actualizaci\xf3n fallida: Error en el servidor remoto"),o.status}catch(o){const e=o.toString().split(":")[1].trim();"Failed to fetch"===e?console.log("Actualizaci\xf3n fallida: No hay conexi\xf3n con la base de datos"):console.log("Actualizaci\xf3n fallida: "+e)}})(m,e,u._id).then(async e=>{200<=e&&e<=299?(h("update",u._id),b({type:"success",title:"Actualizaci\xf3n exitosa",buttons:1})):b({type:"error",title:"Error en la actualizaci\xf3n",buttons:1})},e=>{b({type:"error",title:"Error en la actualizaci\xf3n",buttons:1}),console.log("Error Update: ",e)})}},[j,a,u,m,h,b]),k=(0,o.useMemo)(()=>j.map((e,a)=>(0,c.jsx)("div",{className:"row bg-row flex-nowrap",children:"dropdown"===e.type?(0,c.jsx)(d,{property:e,isOpen:y===e.key,onToggle:()=>w(e.key)}):(0,c.jsx)("div",{className:"col px-0",children:(0,c.jsx)(i,{property:!0,value:e.value,type:e.type,handleChange:e.handleChange,placeholder:e.key.charAt(0).toUpperCase()+e.key.slice(1),className:"input form-control rounded border-muted border-1 text-center shadow-sm"})})},"row"+a)),[j,y,w]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"modalContainer justify-items-center",children:(0,c.jsxs)("div",{className:"modalBox","data-theme":x,children:[(0,c.jsxs)("div",{className:"modalHeader",children:[(0,c.jsx)("center",{children:(0,c.jsx)(t,{color:r.et,height:2.5,width:2.5,strokeWidth:.6,className:"center"})}),(0,c.jsx)("h6",{className:"modalTitle century-gothic main-color pt-2",children:"Actualizar "+a.charAt(0).toUpperCase()+a.slice(1)+"?"})]}),(0,c.jsx)("div",{className:"modalContent",children:(0,c.jsxs)("div",{className:"container-fluid modalTable mt-2",children:[(0,c.jsx)("div",{className:"row bg-row flex-nowrap",children:(0,c.jsx)(i,{placeholder:"C\xf3digo",value:u._id,type:"text",className:"input form-control rounded border-muted border-1 text-center shadow-sm pe-none"})}),k]})}),(0,c.jsx)("div",{className:"modalFooter",children:(0,c.jsxs)("div",{className:"d-flex mt-2 w-100",children:[(0,c.jsx)("button",{className:"aceptBtn w-100",onClick:()=>{N(),v()},children:"Actualizar"}),(0,c.jsx)("button",{className:"cancelBtn w-100",onClick:v,children:"Cancel"})]})})]})}),(0,c.jsx)("div",{className:"darkBackground",onClick:v})]})},m=(0,o.memo)(u)}}]);
//# sourceMappingURL=7654.356e55d0.chunk.js.map