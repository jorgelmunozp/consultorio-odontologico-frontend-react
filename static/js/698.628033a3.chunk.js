"use strict";(self.webpackChunkconsultorio_odontologico_frontend_react=self.webpackChunkconsultorio_odontologico_frontend_react||[]).push([[698],{698:(e,t,s)=>{s.r(t),s.d(t,{ItemsList:()=>g,default:()=>b});var a=s(4391),o=s(5043),l=s(6213),n=(s(3391),s(579));const c=e=>{let{classType:t,Icon:s,item:a,setOpen:o}=e;const c=Object.keys(a[t]),r=Object.values(a[t]);let i=[];r.forEach(e=>{"object"===typeof e?i.push(Object.values(e)[0]+" "+Object.values(e)[1]):i.push(e)});const d=()=>{o(!1),document.getElementById("modal").remove(),document.getElementById("body").classList.remove("noScroll")};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"modalContainer justify-items-center",children:(0,n.jsxs)("div",{className:"modalBox",children:[(0,n.jsxs)("div",{className:"modalHeader",children:[(0,n.jsx)("center",{children:(0,n.jsx)(s,{color:l.et,height:2.5,width:2.5,strokeWidth:.6,className:"center"})}),(0,n.jsx)("h6",{className:"modalTitle main-color pt-2",children:t.charAt(0).toUpperCase()+t.slice(1)})]}),(0,n.jsx)("div",{className:"modalContent",children:(0,n.jsxs)("div",{className:"container-fluid modalTable mt-2 overflow-auto",children:[(0,n.jsxs)("div",{className:"row modalTableTitle flex-nowrap",children:[(0,n.jsx)("div",{className:"col-6",children:"Par\xe1metro"}),(0,n.jsx)("div",{className:"col-6",children:"Datos"})]}),(0,n.jsxs)("div",{className:"row flex-nowrap",children:[(0,n.jsx)("div",{className:"col-6 modalTableData text-start",children:"C\xf3digo"}),(0,n.jsx)("div",{className:"col-6 modalTableData text-start",children:a.id})]}),i.map((e,t)=>(0,n.jsxs)("div",{className:"row flex-nowrap",children:[(0,n.jsx)("div",{className:"col-6 modalTableData text-start",children:c[t].charAt(0).toUpperCase()+c[t].slice(1)}),(0,n.jsx)("div",{className:"col-6 modalTableData text-start",children:e})]},c[t].toLowerCase()))]})}),(0,n.jsx)("div",{className:"modalFooter",children:(0,n.jsx)("div",{className:"d-grid mt-2 w-100",children:(0,n.jsx)("button",{className:"aceptBtn mx-auto w-50",onClick:d,children:"Aceptar"})})})]})}),(0,n.jsx)("div",{className:"darkBackground",onClick:d})]})};var r=s(4446),i=s(5186);var d=s(7466),m=s(7283);const u=e=>{let{classType:t,Icon:s,item:o,urlApi:c,setOpen:u,objectClass:h,icons:p}=e;p[t].IconSearch,p[t].IconEdit,p[t].IconDelete;let j={};switch(t){case"cita":j=h.getState({pac:o[t].paciente,cons:o[t].consultorio,doc:o[t].doctor,trat:o[t].tratamiento});break;case"paciente":j=h.getState({nomb:o[t].nombre,ape:o[t].apellido,id:o[t].identificacion,gen:o[t].genero,eps_:o[t].eps});break;case"doctor":j=h.getState({nomb:o[t].nombre,ape:o[t].apellido,id:o[t].identificacion,gen:o[t].genero,esp:o[t].especialidad});break;case"consultorio":j=h.getState({num:o[t].numero,nomb:o[t].nombre});break;case"tratamiento":j=h.getState({esp:o[t].especialidad,cons:o[t].consultorio,doc:o[t].doctor})}const g=()=>{u(!1),document.getElementById("modal").remove(),document.getElementById("body").classList.remove("noScroll")},b=()=>{if(0===j.filter(e=>""===e.value).length){j.forEach(e=>{o[t][e.key]=e.value});const e=(async(e,t,s)=>{try{const a=await fetch(e+"/"+s,{method:"PUT",body:t,headers:{"Content-type":"application/json"}});return a.json(),200<=a.status&&a.status<=299?console.log("PUT "+a.status+" Actualizaci\xf3n exitosa"):400<=a.status&&a.status<=499?console.log("PUT "+a.status+" Actualizaci\xf3n fallida: Error en el env\xedo de datos"):500<=a.status&&a.status<=599&&console.log("PUT "+a.status+" Actualizaci\xf3n fallida: Error en el servidor remoto"),a.status}catch(a){const e=a.toString().split(":")[1].trim();"Failed to fetch"===e?console.log("Registro fallido: No hay conexi\xf3n con la base de datos"):console.log("Registro fallido: "+e)}})(c,JSON.stringify(o),o.id);e.then(async function(e){if(200<=e&&e<=299){await fetch(c).then(e=>e.json());(0,a.H)(document.getElementById("row"+t+o.id)).render((0,n.jsx)(x,{classType:t,icons:p,item:o,urlApi:c,objectClass:h})),(0,r.F)({type:"success",title:"Actualizaci\xf3n exitosa"}).launch()}else(0,r.F)({type:"error",title:"Error en la actualizaci\xf3n"}).launch()},function(e){(0,r.F)({type:"error",title:"Error en la actualizaci\xf3n"}).launch(),console.log("Error Update: ",e)})}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"modalContainer justify-items-center",children:(0,n.jsxs)("div",{className:"modalBox",children:[(0,n.jsxs)("div",{className:"modalHeader",children:[(0,n.jsx)("center",{children:(0,n.jsx)(s,{color:l.et,height:2.5,width:2.5,strokeWidth:.6,className:"center"})}),(0,n.jsx)("h6",{className:"modalTitle main-color pt-2",children:"Actualizar "+t.charAt(0).toUpperCase()+t.slice(1)+"?"})]}),(0,n.jsx)("div",{className:"modalContent",children:(0,n.jsxs)("div",{className:"container-fluid modalTable mt-2",children:[(0,n.jsx)("div",{className:"row",children:(0,n.jsx)(m.p,{placeholder:"C\xf3digo",defaultValue:o.id,type:"number",className:"input form-control rounded border-muted border-1 text-muted text-center shadow-sm pe-none"})}),j.map((e,t)=>{const s=new i.m({classType:e.key}),{array:a,pagination:o}=s.getData();return(0,n.jsx)("div",{className:"row",children:"dropdown"===e.type?(0,n.jsx)(d.m,{classType:e.key,object:s,array:a,defaultSelect:e.value,handleChange:e.handleChange,placeholder:e.key.charAt(0).toUpperCase()+e.key.slice(1),pagination:o,className:"input form-control rounded border-muted border-1 text-muted shadow-sm"}):(0,n.jsx)(m.p,{property:!0,defaultValue:e.value,type:e.type,onChange:e.handleChange,placeholder:e.key.charAt(0).toUpperCase()+e.key.slice(1),className:"input form-control rounded border-muted border-1 text-muted text-center shadow-sm"})},t)})]})}),(0,n.jsx)("div",{className:"modalFooter",children:(0,n.jsxs)("div",{className:"d-flex mt-2 w-100",children:[(0,n.jsx)("button",{className:"aceptBtn w-100",onClick:()=>{b(),g()},children:"Actualizar"}),(0,n.jsx)("button",{className:"cancelBtn w-100",onClick:g,children:"Cancel"})]})})]})}),(0,n.jsx)("div",{className:"darkBackground",onClick:g})]})};var h=s(2179);const p=e=>{let{classType:t,Icon:s=h.N,item:o,urlApi:l,setOpen:c}=e;const i=Object.keys(o[t]),d=Object.values(o[t]);let m=[];d.forEach(e=>{"object"===typeof e?m.push(Object.values(e)[0]+" "+Object.values(e)[1]):m.push(e)});const u=()=>{c(!1),document.getElementById("modal").remove(),document.getElementById("body").classList.remove("noScroll")},p=()=>{const e=(async(e,t)=>{try{const s=await fetch(e+"/"+t,{method:"DELETE",headers:{"Content-type":"application/json"}});return s.json(),200<=s.status&&s.status<=299?console.log("DELETE "+s.status+" Registro eliminado"):400<=s.status&&s.status<=499?console.log("DELETE "+s.status+" Eliminaci\xf3n fallida: Error en el env\xedo de datos"):500<=s.status&&s.status<=599&&console.log("DELETE "+s.status+" Eliminaci\xf3n fallida: Error en el servidor remoto"),s.status}catch(s){const e=s.toString().split(":")[1].trim();"Failed to fetch"===e?console.log("Eliminaci\xf3n fallida: No hay conexi\xf3n con la base de datos"):console.log("Eliminaci\xf3n fallida: "+e)}})(l,o.id);e.then(async function(e){if(200<=e&&e<=299){await fetch(l).then(e=>e.json());(0,a.H)(document.getElementById("row"+o.id)).render(),(0,r.F)({type:"success",title:"Eliminaci\xf3n exitosa"}).launch()}else(0,r.F)({type:"error",title:"Error en la eliminaci\xf3n"}).launch()},function(e){(0,r.F)({type:"error",title:"Error en la eliminaci\xf3n"}).launch(),console.log("Error en la eliminaci\xf3n: ",e)})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"modalContainer justify-items-center",children:(0,n.jsxs)("div",{className:"modalBox",children:[(0,n.jsxs)("div",{className:"modalHeader",children:[(0,n.jsx)("center",{children:(0,n.jsx)(s,{color:"#f8bb86",height:3,width:3,className:"center"})}),(0,n.jsx)("h6",{className:"modalTitle main-color pt-2",children:"Eliminar "+t.charAt(0).toUpperCase()+t.slice(1)+"?"})]}),(0,n.jsx)("div",{className:"modalContent",children:(0,n.jsxs)("div",{className:"container-fluid modalTable mt-2 overflow-auto",children:[(0,n.jsxs)("div",{className:"row modalTableTitle flex-nowrap",children:[(0,n.jsx)("div",{className:"col-6",children:"Par\xe1metro"}),(0,n.jsx)("div",{className:"col-6",children:"Datos"})]}),(0,n.jsxs)("div",{className:"row flex-nowrap",children:[(0,n.jsx)("div",{className:"col-6 modalTableData text-start",children:"C\xf3digo"}),(0,n.jsx)("div",{className:"col-6 modalTableData text-start",children:o.id})]}),m.map((e,t)=>(0,n.jsxs)("div",{className:"row flex-nowrap",children:[(0,n.jsx)("div",{className:"col-6 modalTableData text-start",children:i[t].charAt(0).toUpperCase()+i[t].slice(1)}),(0,n.jsx)("div",{className:"col-6 modalTableData text-start",children:e})]},i[t].toLowerCase()))]})}),(0,n.jsx)("div",{className:"modalFooter",children:(0,n.jsxs)("div",{className:"d-flex mt-2 w-100",children:[(0,n.jsx)("button",{className:"aceptBtn w-100",onClick:()=>{p(),u()},children:"Eliminar"}),(0,n.jsx)("button",{className:"cancelBtn w-100",onClick:u,children:"Cancel"})]})})]})}),(0,n.jsx)("div",{className:"darkBackground",onClick:u})]})},x=e=>{let{classType:t,icons:s,item:l,urlApi:r,objectClass:i}=e;const[d,m]=(0,o.useState)(!1),h=s[t].IconRead,x=s[t].IconSearch,j=s[t].IconEdit,g=s[t].IconDelete,b=["paciente","doctor","consultorio","tratamiento","especialidad","genero","eps"];!1!==d?document.getElementById("body").classList.add("noScroll"):document.getElementById("body").classList.remove("noScroll");let v="";if(!1!==d){switch(document.getElementById("root").insertAdjacentHTML("afterend",'<div id="modal"></div>'),v=(0,a.H)(document.getElementById("modal")),d){case"read":v.render((0,n.jsx)(c,{classType:t,Icon:h,item:l,setOpen:m}));break;case"update":v.render((0,n.jsx)(u,{classType:t,Icon:j,item:l,urlApi:r,setOpen:m,objectClass:i,icons:s}));break;case"delete":v.render((0,n.jsx)(p,{classType:t,item:l,urlApi:r,setOpen:m}))}m(!1)}return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"col-3 col-sm-2 text-nowrap",children:l.id}),Object.entries(l[t]).map((e,t)=>(0,n.jsx)("div",{className:"text-start text-nowrap"+(b.includes(e[0])?" col-6 col-sm-3":" col-4 col-sm-2"),children:e[1]},"item"+t)),(0,n.jsx)("div",{className:"col",children:(0,n.jsx)("button",{className:"border-0 bg-transparent queryBtn",onClick:()=>m("read"),children:(0,n.jsx)(x,{})})}),(0,n.jsx)("div",{className:"col",children:(0,n.jsx)("button",{className:"border-0 bg-transparent queryBtn",onClick:()=>m("update"),children:(0,n.jsx)(j,{})})}),(0,n.jsx)("div",{className:"col",children:(0,n.jsx)("button",{className:"border-0 bg-transparent queryBtn",onClick:()=>m("delete"),children:(0,n.jsx)(g,{})})})]})},j=e=>{let{direction:t}=e;switch(t){case"up":return"\u25b4";case"down":return"\u25be"}},g=e=>{let{classType:t,icons:s,titles:a,urlApi:o,array:l,objectClass:c,SortByProperty:r,setSortBy:i,indexPage:d}=e;return(0,n.jsxs)("div",{className:"container-fluid border overflow-auto px-0",children:[(0,n.jsxs)("div",{className:"row flex-nowrap bg-main-color",children:[(0,n.jsx)("span",{className:"col-3 col-sm-2 bg-main-color border-bottom border-dark text-center pe-3 pe-sm-5",children:(0,n.jsxs)("div",{className:"row bg-main-color justify-content-between",children:[(0,n.jsx)("div",{className:"col-3 col-sm-1 align-self-center white-color",children:"C\xf3digo"}),(0,n.jsxs)("div",{className:"col-2",children:[(0,n.jsx)("div",{className:"row lh-1",children:(0,n.jsx)("button",{className:"border-0 bg-transparent dark-color-hover white-color fs-5 pt-0 pb-0 px-0 ms-2 ms-sm-3",onClick:()=>i(1),children:(0,n.jsx)(j,{direction:"up"})})}),(0,n.jsx)("div",{className:"row lh-1",children:(0,n.jsx)("button",{className:"border-0 bg-transparent dark-color-hover white-color fs-5 pt-0 pb-0 px-0 ms-2 ms-sm-3",onClick:()=>i(2),children:(0,n.jsx)(j,{direction:"down"})})})]})]})}),a.map((e,t)=>(0,n.jsx)("span",{className:"bg-main-color border-bottom border-dark text-center pe-3 pe-sm-5"+("dropdown"===e.type?" col-6 col-sm-3":" col-4 col-sm-2"),children:(0,n.jsxs)("div",{className:"row bg-main-color justify-content-between",children:[(0,n.jsx)("div",{className:"col-3 col-sm-1 align-self-center white-color",children:e.title}),(0,n.jsxs)("div",{className:"col-2",children:[(0,n.jsx)("div",{className:"row lh-1",children:(0,n.jsx)("button",{className:"border-0 bg-transparent dark-color-hover white-color fs-5 pt-0 pb-0 px-0 ms-2 ms-sm-3",onClick:()=>i(1+2*(t+1)),children:(0,n.jsx)(j,{direction:"up"})})}),(0,n.jsx)("div",{className:"row lh-1",children:(0,n.jsx)("button",{className:"border-0 bg-transparent dark-color-hover white-color fs-5 pt-0 pb-0 px-0 ms-2 ms-sm-3",onClick:()=>i(2+2*(t+1)),children:(0,n.jsx)(j,{direction:"down"})})})]})]})},"title"+t)),(0,n.jsx)("div",{className:"col-8 col-sm-3 bg-main-color border-bottom border-dark"}),"        "]}),l.sort(r).slice(d[0],d[1]).map(e=>(0,n.jsx)("div",{id:"row"+t+e.id,className:"row flex-nowrap border-bottom text-start text-nowrap py-2",children:(0,n.jsx)(x,{classType:t,icons:s,item:e,urlApi:o,objectClass:c})},e.id))]})},b=g},5186:(e,t,s)=>{s.d(t,{m:()=>n});var a=s(5043),o=s(4446),l=s(5356);class n{constructor(e){let{classType:t=""}=e;this.getValue=e=>{let{defaultValue:t=""}=e,[s,o]=(0,a.useState)(t);return{value:s,setValue:o}},this.getData=()=>{let e=[],t="";switch(this.classType){case"paciente":t="https://jorgelmunozp.github.io/consultorio-odontologico-backend-node/pacientes.json";break;case"doctor":t="https://jorgelmunozp.github.io/consultorio-odontologico-backend-node/doctores.json";break;case"consultorio":t="https://jorgelmunozp.github.io/consultorio-odontologico-backend-node/consultorios.json";break;case"tratamiento":t="https://jorgelmunozp.github.io/consultorio-odontologico-backend-node/tratamientos.json";break;case"eps":t="https://jorgelmunozp.github.io/consultorio-odontologico-backend-node/epss.json";break;case"genero":t="https://jorgelmunozp.github.io/consultorio-odontologico-backend-node/generos.json";break;case"especialidad":t="https://jorgelmunozp.github.io/consultorio-odontologico-backend-node/especialidades.json"}const s=(0,l.s)(t);(0,a.useEffect)(()=>{s.status>=400&&(0,o.F)({type:"error",title:"Error en la conexi\xf3n con la base de datos"}).launch()},[s]),void 0!==s.data.length&&(e=s.data);const[n,c]=(0,a.useState)(5),[r,i]=(0,a.useState)([0,n]),d=Math.floor(e.length/n),m=e.length%n;let u=[],h=[!0];if(0!==m)for(let a=0;a<=d;a++)u.push(a),a<0&&h.push(!1);else if(0===m)for(let a=0;a<d;a++)u.push(a),a<0&&h.push(!1);const[p,x]=(0,a.useState)(h);return{array:e,pagination:{itemsPerPage:n,indexPage:r,activePages:p,indexPages:u,setIndexPage:i,setActivePages:x}}},this.classType={classType:t}.classType}get value(){return this.getValue({defaultValue:""})}get data(){return this.getData()}}},7466:(e,t,s)=>{s.d(t,{m:()=>i});var a=s(5043),o=s(2864),l=(s(6587),s(1279)),n=s.n(l),c=s(4420),r=s(579);const i=e=>{let{classType:t,object:s,placeholder:l="",array:n=[],defaultSelect:c="",handleChange:i,pagination:m,className:u=""}=e;const[h,p]=(0,a.useState)(!1);let{value:x,setValue:j}=s.getValue({defaultValue:c});return(0,r.jsxs)("div",{className:"dropdown form-floating w-100 min-width-10 py-sm-0 px-0",children:[(0,r.jsx)("button",{onClick:()=>p(!1===h),onChange:i,className:u+(0===x.length?" dropdown-toggle text-start pt-2 ps-2 ps-sm-3 pe-5 w-100":" dropdown-toggle text-center pt-4 ps-2 ps-sm-3 pe-5 w-100"),type:"button",id:"selectButton"+t,"data-bs-target":"#dropdownMenu"+t,"aria-controls":"dropdownMenu"+t,"aria-expanded":"false",children:0===x.length?l:x}),(0,r.jsx)("label",{htmlFor:"selectButton",className:"form-label text-muted text-nowrap text-truncate",children:0===x.length?"":l}),(0,r.jsxs)("ul",{id:"dropdownMenu"+t,className:"dropdown-menu text-center shadow-sm w-100 overflow-auto slideIn smooth"+(h?" collapse show":""),style:0===n.length?{maxHeight:"0rem"}:{maxHeight:"12rem"},"aria-labelledby":"selectButton",children:[n.slice(m.indexPage[0],m.indexPage[1]).map((e,s)=>{switch(t){case"paciente":case"doctor":x=e[t].nombre+" "+e[t].apellido;break;case"consultorio":x=e[t].numero+" "+e[t].nombre;break;case"tratamiento":x=e[t].especialidad;break;case"eps":case"genero":case"especialidad":x=e[t].nombre}return(0,r.jsx)(d,{value:x,setValue:j,setOpen:p,handleChange:i},t+"Option"+s)}),(0,r.jsx)(o.Y,{array:n,itemsPerPage:m.itemsPerPage,indexPage:m.indexPage,activePages:m.activePages,indexPages:m.indexPages,setIndexPage:m.setIndexPage,setActivePages:m.setActivePages})]})]})},d=e=>{let{value:t,setValue:s,setOpen:a,handleChange:o}=e;return(0,r.jsx)("li",{children:(0,r.jsx)("button",{className:"dropdown-item",value:n()(t,"3lC0nsult0r10"),onClick:e=>{s((0,c.s)(e.target.value)),a(!1),o(e)},children:t})})}}}]);
//# sourceMappingURL=698.628033a3.chunk.js.map